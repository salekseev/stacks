# Environment Variable Schema: Media Automation Stack
# This file should be copied to stacks/stack.env and values configured

# ============================================
# COMMON SETTINGS (all services)
# ============================================

# Timezone for logging and scheduling
# Default: America/New_York (as specified in requirements)
TZ=America/New_York

# User ID for file operations (must match host user)
# Using same value as existing Plex stack (stacks/plex.yaml)
# Verify on Portainer host with: id -u
PUID=1000

# Group ID for file operations (must match host group)
# Using same value as existing Plex stack (stacks/plex.yaml)
# Verify on Portainer host with: id -g
PGID=1000

# File creation mask (0002 = rwxrwxr-x)
# Default: 0002 (group writable)
UMASK=0002

# ============================================
# HOST PATHS (for local testing support)
# ============================================

# Base configuration directory for all services
# Production: /mnt/spool/apps/config
# Test: Overridden by test script to /tmp/starr-test-*/config
STARR_CONFIG_ROOT=/mnt/spool/apps/config

# Base media directory for TV shows, movies, and downloads
# Production: /mnt/dpool/media
# Test: Overridden by test script to /tmp/starr-test-*/media
STARR_MEDIA_ROOT=/mnt/dpool/media

# Docker network name for stack isolation
# Production: starr_net
# Test: Overridden by test script to starr_net_test_*
STARR_NETWORK_NAME=starr_net

# ============================================
# SERVICE API KEYS
# Note: Most keys are generated on first run
# Access the service web UI to retrieve/generate
# ============================================

# Sonarr API Key
# Generated at: Settings > General > Security > API Key
# Leave empty on first deployment, populate after initial setup
SONARR_API_KEY=

# Radarr API Key  
# Generated at: Settings > General > Security > API Key
# Leave empty on first deployment, populate after initial setup
RADARR_API_KEY=

# Prowlarr API Key
# Generated at: Settings > General > Security > API Key
# Leave empty on first deployment, populate after initial setup
PROWLARR_API_KEY=

# ============================================
# CLOUDFLARE TUNNEL
# ============================================

# Cloudflare Tunnel Token
# Obtained from: Cloudflare Dashboard > Zero Trust > Access > Tunnels
# Required for secure remote access
# Format: Long alphanumeric string
TUNNEL_TOKEN=

# ============================================
# OPTIONAL SETTINGS
# ============================================

# Sabnzbd Configuration
# Note: Sabnzbd uses internal config file for API keys
# Configure via web UI after first run

# qBittorrent Configuration  
# Note: qBittorrent web UI port (default: 8080)
# Username/password configured in UI on first run
WEBUI_PORT=8080

# Unpackerr Configuration
# Note: Unpackerr requires Sonarr/Radarr API keys
# Update SONARR_API_KEY and RADARR_API_KEY after services initialize

# Recyclarr Configuration
# Note: Recyclarr reads API keys from its config.yml
# Configured separately in /mnt/spool/apps/config/recyclarr/config.yml

# ============================================
# HOST PATHS (for reference - not actual env vars)
# ============================================

# Media Library: /mnt/dpool/media
# - TV Shows: /mnt/dpool/media/tv
# - Movies: /mnt/dpool/media/movies
# - Downloads: /mnt/dpool/media/downloads
#   - Usenet: /mnt/dpool/media/downloads/usenet
#   - Torrents: /mnt/dpool/media/downloads/torrents

# Configuration: /mnt/spool/apps/config
# - Sonarr: /mnt/spool/apps/config/sonarr
# - Radarr: /mnt/spool/apps/config/radarr
# - Prowlarr: /mnt/spool/apps/config/prowlarr
# - Sabnzbd: /mnt/spool/apps/config/sabnzbd
# - qBittorrent: /mnt/spool/apps/config/qbittorrent
# - Unpackerr: /mnt/spool/apps/config/unpackerr
# - Recyclarr: /mnt/spool/apps/config/recyclarr
# - Cloudflared: /mnt/spool/apps/config/cloudflared

# ============================================
# SETUP INSTRUCTIONS
# ============================================

# 1. Copy this file to stacks/stack.env
#    cp contracts/env-schema.env ../stacks/stack.env
#
# 2. Edit stacks/stack.env and configure:
#    - TZ (your timezone)
#    - PUID/PGID (your user/group IDs)
#    - TUNNEL_TOKEN (from Cloudflare dashboard)
#
# 3. Deploy the stack:
#    docker-compose -f stacks/starr.yaml up -d
#
# 4. Wait for services to become healthy:
#    docker-compose -f stacks/starr.yaml ps
#
# 5. Access services via Cloudflare Tunnel and configure:
#    - Prowlarr: Add indexers
#    - Sonarr: Add Prowlarr app, configure download clients
#    - Radarr: Add Prowlarr app, configure download clients
#    - Retrieve API keys from each service
#
# 6. Update stacks/stack.env with API keys:
#    - SONARR_API_KEY
#    - RADARR_API_KEY  
#    - PROWLARR_API_KEY
#
# 7. Restart Unpackerr to pick up API keys:
#    docker-compose -f stacks/starr.yaml restart unpackerr
#
# 8. Configure Recyclarr in its config file:
#    Edit /mnt/spool/apps/config/recyclarr/config.yml
#    Add Sonarr and Radarr instances with API keys
#
# 9. Verify integration:
#    - Add a test TV show in Sonarr
#    - Verify search, download, extraction, organization
